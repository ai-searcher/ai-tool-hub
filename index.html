<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>AI Searcher - Finde dein perfektes KI-Tool</title>
<meta name="description" content="Finde in 2 Klicks dein perfektes KI-Tool. Echte User-Bewertungen, intelligente Empfehlungen.">
<meta property="og:title" content="AI Searcher">
<meta property="og:description" content="Finde in 2 Klicks dein perfektes KI-Tool.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Orbitron:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root {
  --primary: #00d4ff;
  --primary-dark: #00a8cc;
  --secondary: #a855f7;
  --accent: #00ff9d;
  --bg-dark: #0a0e17;
  --bg-card: #141824;
  --bg-hover: #1a1f2e;
  --text-primary: #ffffff;
  --text-secondary: #a0aec0;
  --text-muted: #718096;
  --border: rgba(255, 255, 255, 0.05);
  --success: #10b981;
  --error: #ef4444;
  --warning: #f59e0b;
  --gold: #fbbf24;
  --shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
  --shadow-hover: 0 8px 40px rgba(0, 212, 255, 0.15);
  --radius: 12px;
  --radius-lg: 16px;
  --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  --current-density: 1;
  --header-height: 60px;
  --hero-height: 280px;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Inter', sans-serif;
  background: linear-gradient(135deg, #0a0e17 0%, #12151f 100%);
  color: var(--text-primary);
  min-height: 100vh;
  line-height: 1.6;
}

body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: 
    radial-gradient(circle at 20% 20%, rgba(0, 212, 255, 0.08) 0%, transparent 50%),
    radial-gradient(circle at 80% 80%, rgba(168, 85, 247, 0.08) 0%, transparent 50%);
  z-index: -1;
  pointer-events: none;
}

.sticky-header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: var(--header-height);
  background: rgba(10, 14, 23, 0.95);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border);
  z-index: 1000;
  padding: 0 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.site-title {
  font-family: 'Orbitron', sans-serif;
  font-size: 1.8rem;
  font-weight: 800;
  background: linear-gradient(135deg, var(--primary), var(--accent), var(--secondary));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  letter-spacing: 1px;
}

.hero-area {
  margin-top: var(--header-height);
  height: var(--hero-height);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 0 20px;
  text-align: center;
  background: linear-gradient(180deg, rgba(10, 14, 23, 0.8) 0%, transparent 100%);
}

.hero-title {
  font-weight: 800;
  font-size: 3rem;
  background: linear-gradient(135deg, var(--primary), var(--accent), var(--secondary));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 24px;
}

.hero-subtitle {
  font-size: 1.1rem;
  color: var(--text-secondary);
  margin-bottom: 32px;
  max-width: 600px;
}

.hero-search-container {
  width: 100%;
  max-width: 600px;
  margin: 0 auto 16px;
}

.hero-omnibox-input {
  width: 100%;
  padding: 16px 24px;
  background: rgba(20, 24, 36, 0.8);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  color: var(--text-primary);
  font-size: 1rem;
  transition: var(--transition);
  backdrop-filter: blur(10px);
}

.hero-omnibox-input:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1), 0 0 30px rgba(0, 212, 255, 0.2);
}

.top5-bar {
  background: rgba(20, 24, 36, 0.6);
  border: 1px solid rgba(0, 212, 255, 0.1);
  border-radius: var(--radius);
  padding: 12px 16px;
  margin: 20px auto;
  max-width: 1400px;
  backdrop-filter: blur(10px);
}

.top5-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
  padding-bottom: 8px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.top5-list {
  display: flex;
  gap: 10px;
  overflow-x: auto;
  padding: 4px 0;
  -webkit-overflow-scrolling: touch;
}

.top5-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: rgba(26, 31, 46, 0.5);
  border-radius: 8px;
  border: 1px solid transparent;
  transition: var(--transition);
  min-width: 180px;
  flex-shrink: 0;
  cursor: pointer;
}

.top5-item:hover {
  background: rgba(26, 31, 46, 0.8);
  border-color: rgba(0, 212, 255, 0.3);
}

.filter-chips {
  display: flex;
  gap: 8px;
  flex-wrap: nowrap;
  overflow-x: auto;
  padding: 8px 0;
  margin: 0 auto 20px;
  max-width: 1400px;
  -webkit-overflow-scrolling: touch;
}

.filter-chip {
  background: rgba(20, 24, 36, 0.8);
  border: 1px solid var(--border);
  color: var(--text-secondary);
  padding: 6px 14px;
  border-radius: 20px;
  font-size: 0.8rem;
  cursor: pointer;
  transition: var(--transition);
  white-space: nowrap;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  gap: 6px;
}

.filter-chip.active {
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  border-color: transparent;
  color: white;
  font-weight: 600;
}

.main-content {
  padding: 20px;
  max-width: 1400px;
  margin-left: auto;
  margin-right: auto;
  padding-bottom: 80px;
}

.tool-group {
  background: var(--bg-card);
  border-radius: var(--radius);
  border: 1px solid var(--border);
  overflow: hidden;
  box-shadow: var(--shadow);
  transition: var(--transition);
  margin-bottom: 12px;
}

.group-header {
  padding: 16px 20px;
  background: rgba(26, 31, 46, 0.5);
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: pointer;
  user-select: none;
  transition: var(--transition);
}

.group-title {
  display: flex;
  align-items: center;
  gap: 12px;
  font-weight: 700;
  font-size: calc(1rem * var(--current-density));
  color: var(--text-primary);
}

.group-icon {
  width: 32px;
  height: 32px;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
}

.group-count {
  color: var(--text-muted);
  font-size: calc(0.8rem * var(--current-density));
  margin-left: 8px;
}

.tool-row {
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  padding: 0 20px;
  border-bottom: 1px solid var(--border);
  cursor: pointer;
  transition: var(--transition);
  min-height: 60px;
}

.tool-row:hover {
  background: var(--bg-hover);
}

.tool-vote {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  min-width: 70px;
  padding-right: 15px;
}

.vote-count {
  font-weight: 800;
  font-size: calc(1.1rem * var(--current-density));
  color: var(--text-primary);
}

.vote-buttons {
  display: flex;
  gap: 6px;
}

.vote-btn-row {
  background: var(--bg-hover);
  border: 1px solid var(--border);
  color: var(--text-secondary);
  cursor: pointer;
  transition: var(--transition);
  padding: 6px;
  border-radius: 6px;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.tool-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
  flex: 1;
  padding-right: 20px;
}

.tool-name {
  font-weight: 700;
  font-size: calc(1rem * var(--current-density));
  color: var(--text-primary);
  display: flex;
  align-items: center;
  gap: 8px;
}

.tool-category {
  font-size: calc(0.7rem * var(--current-density));
  color: var(--primary);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.tool-desc {
  font-size: calc(0.85rem * var(--current-density));
  color: var(--text-secondary);
  line-height: 1.4;
  display: -webkit-box;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.tool-meta {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 8px;
  min-width: 140px;
}

.tool-price {
  font-size: calc(0.9rem * var(--current-density));
  color: var(--success);
  font-weight: 700;
}

.tool-actions {
  display: flex;
  gap: 6px;
}

.tool-action-btn {
  background: var(--bg-hover);
  border: 1px solid var(--border);
  color: var(--text-secondary);
  cursor: pointer;
  transition: var(--transition);
  padding: 8px;
  border-radius: 8px;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.collapse-button, .show-more {
  padding: 12px 20px;
  text-align: center;
  border-top: 1px solid var(--border);
  cursor: pointer;
  color: var(--primary);
  font-weight: 600;
  font-size: calc(0.85rem * var(--current-density));
  transition: var(--transition);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.collapse-button:hover, .show-more:hover {
  background: rgba(0, 212, 255, 0.05);
}

.floating-favorites-btn {
  position: fixed;
  left: 16px;
  bottom: 20px;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  color: white;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  cursor: pointer;
  z-index: 900;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
}

.floating-favorites-badge {
  position: absolute;
  top: -4px;
  right: -4px;
  background: var(--error);
  color: white;
  font-size: 0.7rem;
  font-weight: 800;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.site-footer {
  background: rgba(10, 14, 23, 0.8);
  border-top: 1px solid var(--border);
  padding: 20px;
  margin-top: 40px;
  text-align: center;
  color: var(--text-secondary);
  font-size: 0.85rem;
}

.footer-links {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-bottom: 10px;
}

.footer-links a {
  color: var(--primary);
  text-decoration: none;
}

@media (max-width: 768px) {
  .hero-title { font-size: 2rem; }
  .hero-subtitle { font-size: 0.95rem; }
  .tool-row { grid-template-columns: 1fr; gap: 12px; padding: 15px; }
  .tool-vote { flex-direction: row; justify-content: space-between; width: 100%; }
  .tool-meta { flex-direction: row; justify-content: space-between; width: 100%; }
}
</style>
</head>
<body>

<header class="sticky-header">
  <div class="site-title">AI Searcher</div>
  <button class="lang-btn" id="langToggle">
    <i class="fas fa-globe"></i>
    <span id="langText">EN</span>
  </button>
</header>

<div class="hero-area">
  <h1 class="hero-title">AI Searcher</h1>
  <div class="hero-subtitle" id="heroSubtitle">
    Finde in 2 Klicks dein perfektes KI-Tool. Echte User-Bewertungen, intelligente Empfehlungen.
  </div>
  <div class="hero-search-container">
    <input type="text" class="hero-omnibox-input" id="omniboxInput" placeholder="Ich suche nach...">
  </div>
</div>

<main class="main-content">
  <div class="top5-bar" id="top5Bar">
    <div class="top5-header">
      <i class="fas fa-trophy"></i>
      <span>Top 5 Tools</span>
    </div>
    <div class="top5-list" id="top5List"></div>
  </div>
  
  <div class="filter-chips" id="filterChips"></div>
  
  <div id="tools-container"></div>
  
  <div class="loading" id="loading">
    <i class="fas fa-circle-notch"></i>
    <p>Lade KI-Tools...</p>
  </div>
</main>

<footer class="site-footer">
  <div class="footer-links">
    <a href="#" id="imprintLink">Impressum</a>
    <a href="#" id="privacyLink">Datenschutz</a>
  </div>
  <div class="footer-copyright">
    Â© 2026 AI Searcher. Alle Rechte vorbehalten.
  </div>
</footer>

<button class="floating-favorites-btn" id="floatingFavoritesBtn">
  <i class="fas fa-star"></i>
  <span class="floating-favorites-badge" id="floatingFavoritesBadge">0</span>
</button>

<script>
// ===== KONFIGURATION =====
const CATEGORY_CONFIG = {
  text: { icon: 'âœï¸', de: 'Text', en: 'Text' },
  image: { icon: 'ðŸŽ¨', de: 'Bild', en: 'Image' },
  code: { icon: 'ðŸ’»', de: 'Code', en: 'Code' },
  video: { icon: 'ðŸŽ¬', de: 'Video', en: 'Video' },
  audio: { icon: 'ðŸŽµ', de: 'Audio', en: 'Audio' }
};

const FILTERS = [
  { id: 'all', icon: 'fas fa-border-all', de: 'Alle', en: 'All' },
  { id: 'text', icon: 'fas fa-pen', de: 'Text', en: 'Text' },
  { id: 'image', icon: 'fas fa-image', de: 'Bild', en: 'Image' },
  { id: 'code', icon: 'fas fa-code', de: 'Code', en: 'Code' },
  { id: 'video', icon: 'fas fa-video', de: 'Video', en: 'Video' },
  { id: 'audio', icon: 'fas fa-music', de: 'Audio', en: 'Audio' },
  { id: 'free', icon: 'fas fa-gift', de: 'Kostenlos', en: 'Free' },
  { id: 'ai', icon: 'fas fa-robot', de: 'AI Pick', en: 'AI Pick' }
];

// ===== STATE =====
let aiTools = [];
let currentLang = 'de';
let currentCategory = 'all';
let searchQuery = '';

// ===== DATEN LADEN =====
async function loadAITools() {
  try {
    const response = await fetch('data.json');
    const rawData = await response.json();
    const savedVotes = JSON.parse(localStorage.getItem('aiToolVotes') || '{}');

    aiTools = rawData.map((item, index) => {
      const saved = savedVotes[item.id] || {};
      return {
        id: item.id,
        name: item.name,
        category: item.cat,
        link: item.link,
        rating: item.rate || 0,
        price: item.price || "freemium",
        hasLifetimeDeal: item.ltd || false,
        description: { de: item.d[0], en: item.d[1] },
        priceDisplay: { de: item.cost[0], en: item.cost[1] },
        pros: { de: item.pros[0], en: item.pros[1] },
        cons: { de: item.cons[0], en: item.cons[1] },
        features: item.f || [],
        tags: item.tags || [],
        alternatives: item.alt || [],
        votes: saved.totalVotes || 0,
        userVote: saved.userVote || 0,
        upvotes: saved.upvotes || 0,
        downvotes: saved.downvotes || 0
      };
    });

    addAIRecommendations();
    renderFilterChips();
    updateTop5Bar();
    renderToolGroups();
  } catch (error) {
    document.getElementById('loading').innerHTML = '<p>Fehler beim Laden.</p>';
  }
}

function addAIRecommendations() {
  const favorites = JSON.parse(localStorage.getItem('aiFavorites') || '[]');
  aiTools.forEach(tool => {
    let score = 0;
    if (tool.rating >= 4.7) score += 3;
    if (tool.votes > 50) score += 2;
    if (favorites.includes(tool.id)) score += 3;
    if (tool.hasLifetimeDeal) score += 2;
    tool.aiScore = score;
    tool.isAIRecommended = score >= 5;
  });
}

// ===== RENDERING =====
function renderFilterChips() {
  const chipsHTML = FILTERS.map(filter => `
    <div class="filter-chip ${currentCategory === filter.id ? 'active' : ''}" 
         data-filter="${filter.id}"
         onclick="setActiveFilter('${filter.id}')">
      <i class="${filter.icon}"></i>
      <span>${currentLang === 'de' ? filter.de : filter.en}</span>
    </div>
  `).join('');
  
  document.getElementById('filterChips').innerHTML = chipsHTML;
}

function updateTop5Bar() {
  const sortedTools = [...aiTools]
    .sort((a, b) => b.votes - a.votes)
    .slice(0, 5);
  
  const top5HTML = sortedTools.map((tool, index) => {
    const description = tool.description[currentLang];
    return `
      <div class="top5-item" onclick="openToolDrawer('${tool.id}')">
        <div class="top5-rank">${index + 1}</div>
        <div class="top5-icon">${CATEGORY_CONFIG[tool.category].icon}</div>
        <div class="top5-info">
          <div class="top5-name">${tool.name}</div>
          <div class="top5-category">${CATEGORY_CONFIG[tool.category][currentLang]}</div>
        </div>
        <div class="top5-votes">${Math.max(tool.votes, 0)}</div>
      </div>
    `;
  }).join('');
  
  document.getElementById('top5List').innerHTML = top5HTML;
}

function renderToolGroups() {
  const categories = Object.keys(CATEGORY_CONFIG);
  const expandedGroups = JSON.parse(localStorage.getItem('expandedGroups') || '{}');
  const container = document.getElementById('tools-container');
  
  let groupsHTML = '';
  
  categories.forEach(category => {
    let categoryTools = aiTools.filter(tool => tool.category === category);
    
    if (currentCategory === 'free') {
      categoryTools = categoryTools.filter(tool => tool.price === 'free');
    } else if (currentCategory === 'ai') {
      categoryTools = categoryTools.filter(tool => tool.isAIRecommended);
    }
    
    if (categoryTools.length === 0 && currentCategory !== 'all') return;
    
    const sortedTools = [...categoryTools].sort((a, b) => b.votes - a.votes);
    const isExpanded = expandedGroups[category] || false;
    const displayTools = isExpanded ? sortedTools : sortedTools.slice(0, 2);
    const remainingCount = Math.max(0, sortedTools.length - 2);
    
    const toolsHTML = displayTools.map(tool => {
      const votes = Math.max(tool.votes, 0);
      const isFavorite = JSON.parse(localStorage.getItem('aiFavorites') || '[]').includes(tool.id);
      const isInCompare = JSON.parse(localStorage.getItem('aiComparison') || '[]').includes(tool.id);
      
      return `
        <div class="tool-row" onclick="openToolDrawer('${tool.id}')">
          <div class="tool-vote" onclick="event.stopPropagation()">
            <div class="vote-count">${votes}</div>
            <div class="vote-buttons">
              <button class="vote-btn-row up ${tool.userVote === 1 ? 'active' : ''}" onclick="vote('${tool.id}', 'up')">
                <i class="fas fa-arrow-up"></i>
              </button>
              <button class="vote-btn-row down ${tool.userVote === -1 ? 'active' : ''}" onclick="vote('${tool.id}', 'down')">
                <i class="fas fa-arrow-down"></i>
              </button>
            </div>
          </div>
          
          <div class="tool-info">
            <div class="tool-category">${CATEGORY_CONFIG[tool.category][currentLang]}</div>
            <div class="tool-name">
              ${tool.name}
              ${tool.isAIRecommended ? '<i class="fas fa-robot" style="color: var(--secondary);"></i>' : ''}
            </div>
            <div class="tool-desc">${tool.description[currentLang]}</div>
          </div>
          
          <div class="tool-meta" onclick="event.stopPropagation()">
            <div class="tool-price">${tool.priceDisplay[currentLang]}</div>
            <div class="tool-actions">
              <button class="tool-action-btn favorite ${isFavorite ? 'active' : ''}" onclick="toggleFavorite('${tool.id}')">
                <i class="fas fa-star"></i>
              </button>
              <button class="tool-action-btn compare ${isInCompare ? 'active' : ''}" onclick="toggleComparison('${tool.id}')">
                <i class="fas fa-balance-scale"></i>
              </button>
              <a href="${tool.link}" target="_blank" class="tool-action-btn open" onclick="event.stopPropagation()">
                <i class="fas fa-external-link-alt"></i>
              </a>
            </div>
          </div>
        </div>
      `;
    }).join('');
    
    const collapseButton = isExpanded ? `
      <div class="collapse-button" onclick="collapseGroup('${category}')">
        <span>${currentLang === 'de' ? 'Weniger anzeigen â†‘' : 'Show less â†‘'}</span>
      </div>
    ` : '';
    
    const showMoreButton = !isExpanded && sortedTools.length > 2 ? `
      <div class="show-more" onclick="expandGroup('${category}')">
        <span>${currentLang === 'de' ? `+ ${remainingCount} mehr anzeigen` : `+ ${remainingCount} more`}</span>
      </div>
    ` : '';
    
    groupsHTML += `
      <div class="tool-group" data-category="${category}">
        <div class="group-header" onclick="toggleGroup('${category}')">
          <div class="group-title">
            <div class="group-icon">${CATEGORY_CONFIG[category].icon}</div>
            <span>${CATEGORY_CONFIG[category][currentLang]}</span>
            <span class="group-count">${categoryTools.length}</span>
          </div>
          <div class="group-toggle ${isExpanded ? 'expanded' : ''}">
            <i class="fas fa-chevron-down"></i>
          </div>
        </div>
        <div class="group-content ${isExpanded ? 'expanded' : ''}">
          ${toolsHTML}
          ${collapseButton}
        </div>
        ${showMoreButton}
      </div>
    `;
  });
  
  container.innerHTML = groupsHTML;
  document.getElementById('loading').style.display = 'none';
}

// ===== FUNKTIONALITÃ„T =====
function setActiveFilter(filterId) {
  currentCategory = filterId;
  document.querySelectorAll('.filter-chip').forEach(chip => chip.classList.remove('active'));
  document.querySelector(`[data-filter="${filterId}"]`).classList.add('active');
  renderToolGroups();
}

function expandGroup(category) {
  const expandedGroups = JSON.parse(localStorage.getItem('expandedGroups') || '{}');
  expandedGroups[category] = true;
  localStorage.setItem('expandedGroups', JSON.stringify(expandedGroups));
  renderToolGroups();
}

function collapseGroup(category) {
  const expandedGroups = JSON.parse(localStorage.getItem('expandedGroups') || '{}');
  expandedGroups[category] = false;
  localStorage.setItem('expandedGroups', JSON.stringify(expandedGroups));
  renderToolGroups();
}

function toggleGroup(category) {
  const expandedGroups = JSON.parse(localStorage.getItem('expandedGroups') || '{}');
  expandedGroups[category] = !expandedGroups[category];
  localStorage.setItem('expandedGroups', JSON.stringify(expandedGroups));
  renderToolGroups();
}

function vote(toolId, type) {
  const tool = aiTools.find(t => t.id === toolId);
  if (!tool) return;
  
  const voteValue = type === 'up' ? 1 : -1;
  const oldVote = tool.userVote || 0;
  
  if (oldVote === voteValue) {
    tool.userVote = 0;
    tool.votes -= voteValue;
  } else {
    tool.userVote = voteValue;
    tool.votes += voteValue - oldVote;
  }
  
  const savedVotes = JSON.parse(localStorage.getItem('aiToolVotes') || '{}');
  savedVotes[toolId] = { userVote: tool.userVote, totalVotes: tool.votes };
  localStorage.setItem('aiToolVotes', JSON.stringify(savedVotes));
  
  updateTop5Bar();
  renderToolGroups();
}

function toggleFavorite(toolId) {
  let favorites = JSON.parse(localStorage.getItem('aiFavorites') || '[]');
  if (favorites.includes(toolId)) {
    favorites = favorites.filter(id => id !== toolId);
  } else {
    favorites.push(toolId);
  }
  localStorage.setItem('aiFavorites', JSON.stringify(favorites));
  renderToolGroups();
  updateFloatingBadge();
}

function toggleComparison(toolId) {
  let comparison = JSON.parse(localStorage.getItem('aiComparison') || '[]');
  if (comparison.includes(toolId)) {
    comparison = comparison.filter(id => id !== toolId);
  } else {
    if (comparison.length < 3) comparison.push(toolId);
  }
  localStorage.setItem('aiComparison', JSON.stringify(comparison));
  renderToolGroups();
  updateFloatingBadge();
}

function updateFloatingBadge() {
  const favorites = JSON.parse(localStorage.getItem('aiFavorites') || '[]');
  const comparison = JSON.parse(localStorage.getItem('aiComparison') || '[]');
  const total = favorites.length + comparison.length;
  document.getElementById('floatingFavoritesBadge').textContent = total;
}

function openToolDrawer(toolId) {
  alert(`Detailansicht fÃ¼r ${toolId} wÃ¼rde hier geÃ¶ffnet`);
}

// ===== INITIALISIERUNG =====
function init() {
  loadAITools();
  updateFloatingBadge();
  
  document.getElementById('langToggle').addEventListener('click', () => {
    currentLang = currentLang === 'de' ? 'en' : 'de';
    document.getElementById('langText').textContent = currentLang === 'de' ? 'EN' : 'DE';
    document.getElementById('heroSubtitle').textContent = currentLang === 'de' 
      ? 'Finde in 2 Klicks dein perfektes KI-Tool. Echte User-Bewertungen, intelligente Empfehlungen.'
      : 'Find your perfect AI tool in 2 clicks. Real user reviews, intelligent recommendations.';
    document.getElementById('omniboxInput').placeholder = currentLang === 'de' 
      ? 'Ich suche nach...' 
      : 'I\'m looking for...';
    renderFilterChips();
    updateTop5Bar();
    renderToolGroups();
  });
  
  document.getElementById('floatingFavoritesBtn').addEventListener('click', () => {
    alert('Favoriten-Overlay wÃ¼rde hier geÃ¶ffnet');
  });
  
  document.getElementById('omniboxInput').addEventListener('input', (e) => {
    searchQuery = e.target.value.toLowerCase();
    const rows = document.querySelectorAll('.tool-row');
    rows.forEach(row => {
      const text = row.textContent.toLowerCase();
      row.style.display = text.includes(searchQuery) ? 'grid' : 'none';
    });
  });
}

document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>